if("undefined"==typeof jQuery.aljs)throw new Error("Please include the ALJS initializer file");!function(s){function e(){d=s.aljs.scoped?".fielosf":i,s(".slds-backdrop").remove(),s(d).append('<div class="aljs-modal-container"></div>');var e=s(".aljs-modal-container");l.appendTo(e).append('<div class="slds-backdrop"></div>').attr("aria-hidden","true").addClass("slds-hide")}function a(e,a,o){var d=e.data("aljs-show"),i=s("#"+d);void 0===d?console.error('No "data-aljs-show" attribute has been set'):(i.modal("show",a,o),e.blur(),n=e)}var o,d,i="body",l=s(".slds-modal"),n=null;s.fn.modal=function(d,t,r){function c(s){27==s.keyCode&&l.is(":visible")&&u()}function u(){f.$el.modal("dismiss",p).unbind("click"),s(i).unbind("keyup",c),l.unbind("click"),v.unbind("click")}function h(e){var a=s(".slds-backdrop"),d=function(){f.$el.trigger("shown.aljs.modal"),p.onShown(f,e),o=!1};a.one("transitionend",d).addClass("slds-backdrop--open"),f.$el.addClass("slds-fade-in-open").trigger("show.aljs.modal"),p.onShow(f,e)}function m(e){a(s(this),d,e)}var f={};if(f.$el=this,f.hasSelector=!(!d||!d.hasOwnProperty("selector")),null!==d&&"string"==typeof d){var p=s.extend({selector:null,dismissSelector:'[data-aljs-dismiss="modal"]',backdropDismiss:!1,onShow:function(s){},onShown:function(s){},onDismiss:function(s){},onDismissed:function(s){}},t),v=s(p.dismissSelector),b=s(".slds-modal__header, .slds-modal__content, .slds-modal__footer");switch(d){case"show":o=!0,f.id=this.attr("id"),s(".slds-modal").removeClass("slds-fade-in-open slds-show").addClass("slds-hide").attr("aria-hidden","true").attr("tabindex",-1),s(".slds-backdrop").remove(),s(".aljs-modal-container").append('<div class="slds-backdrop"></div>'),s(i).keyup(c),f.$el.addClass("slds-show").removeClass("slds-hide").attr("aria-hidden","false").attr("tabindex",1),v.click(function(s){s.preventDefault(),u()}),p.backdropDismiss&&(l.click(u),b.click(function(s){s.stopPropagation()}));var k=null;r&&(k=r.currentTarget),setTimeout(function(){h(k)},25);break;case"dismiss":if(!o){var w=s(".slds-backdrop"),j=function(){o||w.remove(),n=null,f.$el.addClass("slds-hide").removeClass("slds-show").trigger("dismissed.aljs.modal"),p.onDismissed(f)};w.one("transitionend",j).removeClass("slds-backdrop--open")}p.onDismiss(f),f.$el.removeClass("slds-fade-in-open").attr("aria-hidden","true").attr("tabindex",-1),null!==n&&n.focus(),f.$el.trigger("dismiss.aljs.modal");break;case"trigger":var g=f.$el.data("aljs-show"),C=s("#"+g);C.modal("show",p);break;default:console.error("The method you entered does not exist")}}else f.hasSelector&&1===this.length?(e(),this.on("click",d.selector,m)):(e(),f.$el.click(function(e){a(s(this),d,e)}));return this}}(jQuery);